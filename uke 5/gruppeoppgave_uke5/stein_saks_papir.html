<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="stein_saks_papir.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>

    <script>
      //model
      let playerSelected = "Please select an alternative...";
      let computerThinking = "Computer is waiting for you...";
      let computerSelected = "";
      let optionsArray = ["rock", "paper", "scissor"];
      let playerActiveChoice;
      let result = 'Ready for a real Rock, Paper, Scissor challenge?';
      html = document.getElementById("app");
      
      //view
      updateView();
      function updateView() {
        html = `
            <div id="mainFrame">
                <div id="mainScreen">
                    <div id="resetButton" onclick="resetGame()">Restart</div>

                    <div id="textScreen">${result}</div>
                    <div id="playerScreen">${playerSelected} </div>
                    <div id="computerScreen">${computerThinking} ${computerSelected}</div>                  

                    <div id="rock" class="optionBox" onclick="playerChoice(this)">Rock</div>
                    <div id="scissor" class="optionBox" onclick="playerChoice(this)">Scissor</div>
                    <div id="paper" class="optionBox" onclick="playerChoice(this)">Paper</div>
                    
                </div>
            </div>
          `;
        app.innerHTML = html;
      }

      //controller

      function playerChoice(selectedOption) {
        playerSelected = "You have chosen: " + selectedOption.innerText;
        updateView();
        computerThinking = "Computer is thinking...";
        setTimeout(updateView, 1000);        
        setTimeout(computerChoice, 2000);
        setTimeout(updateView, 3000); 
    
        playerActiveChoice = selectedOption.id;        

    }
    
    function computerChoice() {
        let computerActiveChoice =
        optionsArray[Math.floor(Math.random() * optionsArray.length)];
        // console.log(computerActiveChoice);
        computerThinking = "Computer has chosen:";
        //trenger delay
        computerSelected = computerActiveChoice;
        whoIsWinner();
      }

      function whoIsWinner() {
        // console.log('Player global variabel: ' + playerActiveChoice)
        // console.log('Computer global variabel: ' + computerSelected)
        if (playerActiveChoice == computerSelected) {
            result = 'Draw';
        }
        else if (playerActiveChoice == "paper" && computerSelected == "rock" ||    
                playerActiveChoice == "scissor" && computerSelected == "paper" ||
                playerActiveChoice == "rock" && computerSelected == "scissor") {
                result = 'You win';
        }
        else {result = 'You loose';
        }
      }

      function resetGame() {
        playerSelected = "Please select an alternative...";
        computerThinking = "Computer is waiting for you...";
        computerSelected = ""; 
        result = 'Ready for a real Rock, Paper, Scissor challenge?';
        updateView();
      }
    </script>
  </body>
</html>
